<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hosinsa.mapper.MemberMapper">

<!-- SELECT 문 -->
<select id="getList" resultType="com.hosinsa.domain.MemberVO">
	select * from hosinsa_member
</select>

<!-- ID 중복체크 -->
<select id="idCheck" resultType="int">
	select count(*) from hosinsa_member where id = #{id}
</select>

<!-- NickName 중복체크 -->
<select id="nickCheck" resultType="int">
	select count(*) from hosinsa_member where nickname = #{nickname}
</select>

<!-- introducer 중복체크 -->
<select id="introCheck" resultType="int">
	select count(*) from hosinsa_member where id = #{id}
</select>

<select id="read" resultType="com.hosinsa.domain.MemberVO">
	select * from hosinsa_member where id = #{id}
</select>

<!-- 로그인 -->
<select id="memberLogin" resultType="com.hosinsa.domain.MemberVO">
	select * from hosinsa_member where id = #{id} and pw = #{pw}
</select>

<select id="getOrderList" resultType="com.hosinsa.domain.OrderVO">
	select * from hosinsa_order where id = #{id} order by order_date desc
</select>

<!-- INSERT 문 -->
<insert id="insert">
	insert into hosinsa_member values
	(#{id}, #{pw}, #{name}, #{gender}, #{birthday}, #{email}, 
	#{phone}, #{nickname}, #{profilimg, jdbcType=VARCHAR}, #{grade}, #{introducer, jdbcType=VARCHAR}, #{point})
</insert>

<!-- DELETE 문 -->
<delete id="delete">
	delete from hosinsa_member where id = #{id}
</delete>

<!-- UPDATE 문 -->
<update id="update">
	update hosinsa_member set
	PW = #{pw, jdbcType=VARCHAR},
	NAME = #{name, jdbcType=VARCHAR},
	GENDER = #{gender, jdbcType=VARCHAR},
	BIRTHDAY = to_date(#{birthday, jdbcType=DATE},'yyyy-MM-dd'),
	EMAIL = #{email, jdbcType=VARCHAR},
	PHONE = #{phone, jdbcType=CHAR},
	NICKNAME = #{nickname, jdbcType=VARCHAR},
	PROFILIMG = #{profilimg, jdbcType=VARCHAR},
	GRADE = #{grade, jdbcType=CHAR},
	INTRODUCER = #{introducer, jdbcType=VARCHAR},
	POINT = #{point, jdbcType=INTEGER}
	WHERE ID = #{id}
</update>

</mapper>